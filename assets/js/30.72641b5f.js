(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{442:function(t,a,s){"use strict";s.r(a);var e=s(2),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"docker-安装-nginx-容器-完整详细版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-nginx-容器-完整详细版"}},[t._v("#")]),t._v(" Docker 安装 Nginx 容器 (完整详细版)")]),t._v(" "),a("p",[t._v("Docker 安装 (完整详细版)Docker 日常命令大全(完整详细版)说明：Docker如果想安装软件 , 必须先到Docker镜像仓库下载镜像。1、寻找Nginx镜像")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/BThinker/article/details/123358697",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 安装 (完整详细版)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/BThinker/article/details/123355362",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 日常命令大全(完整详细版)"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明：")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://so.csdn.net/so/search?q=Docker&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),a("OutboundLink")],1),t._v("如果想安装软件 , 必须先到 "),a("a",{attrs:{href:"https://so.csdn.net/so/search?q=Docker&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),a("OutboundLink")],1),t._v(" 镜像仓库下载镜像。")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker官方镜像 "),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_1、寻找nginx镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、寻找nginx镜像"}},[t._v("#")]),t._v(" 1、寻找Nginx镜像")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/936384cdefca4d5292438589bd4267b6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/f44d906902c84949bcc07b8cad99c22c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"_2、下载nginx镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、下载nginx镜像"}},[t._v("#")]),t._v(" 2、下载Nginx镜像")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker pull nginx")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("下载最新版Nginx镜像 (其实此命令就等同于 : docker pull nginx:latest )")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker pull nginx:xxx")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("下载指定版本的Nginx镜像 (xxx指具体版本号)")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/cfe33e6c9e16447a991e10067179beac.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("blockquote",[a("p",[t._v("检查当前所有Docker下载的镜像")])]),t._v(" "),a("div",{staticClass:"language-ebnf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ebnf"}},[a("code",[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("docker images")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3、创建nginx配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、创建nginx配置文件"}},[t._v("#")]),t._v(" 3、创建Nginx配置文件")]),t._v(" "),a("blockquote",[a("p",[t._v("启动前需要先创建Nginx外部挂载的配置文件（ /home/nginx/conf/nginx.conf）\n之所以要先创建 , 是因为Nginx本身容器只存在/etc/nginx 目录 , 本身就不创建 nginx.conf 文件\n当服务器和容器都不存在 nginx.conf 文件时, 执行启动命令的时候 docker会将nginx.conf 作为目录创建 , 这并不是我们想要的结果 。")])]),t._v(" "),a("div",{staticClass:"language-awk extra-class"},[a("pre",{pre:!0,attrs:{class:"language-awk"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建挂载目录")]),t._v("\nmkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf\nmkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log\nmkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html\n")])])]),a("blockquote",[a("p",[t._v("容器中的nginx.conf文件和conf.d文件夹复制到宿主机")])]),t._v(" "),a("div",{staticClass:"language-awk extra-class"},[a("pre",{pre:!0,attrs:{class:"language-awk"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成容器")]),t._v("\ndocker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9001")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将容器nginx.conf文件复制到宿主机")]),t._v("\ndocker cp nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/etc/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx.conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将容器conf.d文件夹下内容复制到宿主机")]),t._v("\ndocker cp nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/etc/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf.d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf.d\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将容器中的html文件夹复制到宿主机")]),t._v("\ndocker cp nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/usr/")]),t._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/2a460adaab2446c7a6f805ebdfe1751a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"_4、创建nginx容器并运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、创建nginx容器并运行"}},[t._v("#")]),t._v(" 4、创建Nginx容器并运行")]),t._v(" "),a("blockquote",[a("p",[t._v("Docker 创建Nginx容器")])]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接执行docker rm nginx或者以容器id方式关闭容器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 找到nginx对应的容器id")]),t._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭该容器")]),t._v("\ndocker stop nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除该容器")]),t._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除正在运行的nginx容器")]),t._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f nginx\ndocker run \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p 9002:80 \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name nginx \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/nginx/conf/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/nginx/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/nginx/conf/conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc/nginx/conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/nginx/log:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log/nginx \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home/nginx/html:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr/share/nginx/html \\\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d nginx:latest\n")])])]),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("–name nginx")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("启动容器的名字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-d")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("后台运行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-p 9002:80")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("将容器的 9002(后面那个) 端口映射到主机的 80(前面那个) 端口")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-v /home/nginx/conf/nginx.conf:/etc/nginx/nginx.conf")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("挂载nginx.conf配置文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-v /home/nginx/conf/conf.d:/etc/nginx/conf.d")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("挂载nginx配置文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-v /home/nginx/log:/var/log/nginx")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("挂载nginx日志文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-v /home/nginx/html:/usr/share/nginx/html")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("挂载nginx内容")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("nginx:latest")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("本地运行的版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("\\")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("shell 命令换行")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/e519e235ddd14f31aaa5cd53bb0bb741.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("blockquote",[a("p",[t._v("单行模式")])]),t._v(" "),a("div",{staticClass:"language-awk extra-class"},[a("pre",{pre:!0,attrs:{class:"language-awk"}},[a("code",[t._v("docker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9002")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx.conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/etc/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx.conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf.d"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/etc/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("conf.d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/var/")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/usr/")]),t._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("latest\n")])])]),a("h3",{attrs:{id:"_5、结果检测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、结果检测"}},[t._v("#")]),t._v(" 5、结果检测")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/e040a9897e7342eea38c554735a9b62b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")]),t._v(" "),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/e79b39ae161546aebfe0610005db9f07.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"_6、修改内容进行展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、修改内容进行展示"}},[t._v("#")]),t._v(" 6、修改内容进行展示")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/c48989901bcb4b679d95337aae10f661.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVG91Y2gm,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启容器")]),t._v("\ndocker restart nginx\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);