(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{439:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"nuxt部署-dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuxt部署-dockerfile"}},[t._v("#")]),t._v(" "),s("strong",[t._v("nuxt")]),t._v("部署  Dockerfile")]),t._v(" "),s("h3",{attrs:{id:"dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" node:16.17.1-alpine")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" mkdir -p /app")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . /app")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /app")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v(" 3000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" npm install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" npm run build")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" [ "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),t._v(" ]")]),t._v("\n")])])]),s("h3",{attrs:{id:"构建镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建镜像"}},[t._v("#")]),t._v(" 构建镜像")]),t._v(" "),s("p",[s("code",[t._v("docker build -t nuxt-demo1 .")])]),t._v(" "),s("h3",{attrs:{id:"运行-容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行-容器"}},[t._v("#")]),t._v(" 运行 容器")]),t._v(" "),s("p",[s("code",[t._v("docker run -p 3100:8090 nuxt-demo1")])]),t._v(" "),s("h3",{attrs:{id:"访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[t._v("#")]),t._v(" 访问")]),t._v(" "),s("p",[s("code",[t._v("http://ip:3100")])]),t._v(" "),s("h2",{attrs:{id:"portainer部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#portainer部署"}},[t._v("#")]),t._v(" portainer部署")]),t._v(" "),s("h3",{attrs:{id:"dockerfile-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-2"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[t._v("docker run -d -p 8000:8000 -p 9443:9443 -p 9000:9000 --name portainer2 \\\n    --restart=always \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    -v portainer_data:/data \\\n    portainer/portainer-ce:2.9.3\n")])])]),s("h3",{attrs:{id:"访问-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问-2"}},[t._v("#")]),t._v(" 访问")]),t._v(" "),s("p",[s("code",[t._v("http://ip:9000")])]),t._v(" "),s("h2",{attrs:{id:"puppeteer部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#puppeteer部署"}},[t._v("#")]),t._v(" puppeteer部署")]),t._v(" "),s("h3",{attrs:{id:"dockerfile-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-3"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" node:slim "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" app")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# We don't need the standalone Chromium")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" PUPPETEER_SKIP_CHROMIUM_DOWNLOAD true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Install Google Chrome Stable and fonts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: this installs the necessary libs to make the browser work with Puppeteer.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt-get update && apt-get install curl gnupg -y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n  && curl --location --silent https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n  && sh -c "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n  && apt-get update "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n  && apt-get install google-chrome-stable -y --no-install-recommends "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("\n  && rm -rf /var/lib/apt/lists/*")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . /app/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#COPY local.conf /etc/fonts/local.conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" app")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" npm i")]),t._v("\n\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("  puppeteer --unsafe-perm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true --allow-root\n")])])]),s("p",[t._v("解决bug： "),s("a",{attrs:{href:"https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);