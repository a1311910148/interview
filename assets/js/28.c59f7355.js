(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{438:function(a,s,e){"use strict";e.r(s);var t=e(2),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#查找配置文件位置"}},[a._v("查找配置文件位置")])]),s("li",[s("a",{attrs:{href:"#查找数据文件位置"}},[a._v("查找数据文件位置")])]),s("li",[s("a",{attrs:{href:"#创建本地路径"}},[a._v("创建本地路径")])]),s("li",[s("a",{attrs:{href:"#挂载启动mysql"}},[a._v("挂载启动MySQL")]),s("ul",[s("li",[s("a",{attrs:{href:"#mysql-root-password"}},[a._v("MYSQL_ROOT_PASSWORD")])]),s("li",[s("a",{attrs:{href:"#mysql-database"}},[a._v("MYSQL_DATABASE")])]),s("li",[s("a",{attrs:{href:"#mysql-user-mysql-password"}},[a._v("MYSQL_USER, MYSQL_PASSWORD")])]),s("li",[s("a",{attrs:{href:"#mysql-allow-empty-password"}},[a._v("MYSQL_ALLOW_EMPTY_PASSWORD")])]),s("li",[s("a",{attrs:{href:"#mysql-random-root-password"}},[a._v("MYSQL_RANDOM_ROOT_PASSWORD")])]),s("li",[s("a",{attrs:{href:"#mysql-onetime-password"}},[a._v("MYSQL_ONETIME_PASSWORD")])]),s("li",[s("a",{attrs:{href:"#mysql-initdb-skip-tzinfo"}},[a._v("MYSQL_INITDB_SKIP_TZINFO")])])])]),s("li",[s("a",{attrs:{href:"#创建数据库转储"}},[a._v("创建数据库转储")])]),s("li",[s("a",{attrs:{href:"#从转储文件中恢复数据"}},[a._v("从转储文件中恢复数据")])]),s("li",[s("a",{attrs:{href:"#docker容器-查看、停止、删除容器-https-nkcoder-github-io-posts-docker-docker-container-list-stop-remove"}},[a._v("Docker容器：查看、停止、删除容器")]),s("ul",[s("li",[s("a",{attrs:{href:"#查看容器"}},[a._v("查看容器")])]),s("li",[s("a",{attrs:{href:"#停止容器"}},[a._v("停止容器")])]),s("li",[s("a",{attrs:{href:"#删除容器"}},[a._v("删除容器")])]),s("li",[s("a",{attrs:{href:"#reference-docs"}},[a._v("reference docs:")])])])])])]),s("p"),a._v(" "),s("h1",{attrs:{id:"安装部署环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装部署环境"}},[a._v("#")]),a._v(" 安装部署环境")]),a._v(" "),s("ul",[s("li",[a._v("Ubuntu 20.04.1 LTS")]),a._v(" "),s("li",[a._v("Docker 20.10.11")]),a._v(" "),s("li",[a._v("MySQL latest(8.0.27)")])]),a._v(" "),s("h1",{attrs:{id:"下载镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载镜像"}},[a._v("#")]),a._v(" 下载镜像")]),a._v(" "),s("p",[a._v("从仓库中拉取"),s("code",[a._v("mysql")]),a._v("镜像，如果没加标签的话，默认获取最新版本（latest）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull mysql:tag\n复制代码\n")])])]),s("h1",{attrs:{id:"简单启动-mysql服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单启动-mysql服务器"}},[a._v("#")]),a._v(" 简单启动 MySQL服务器")]),a._v(" "),s("p",[a._v("启动 MySQL 实例很简单：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" some-mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'my-secret-pw'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" mysql:tag\n复制代码\n")])])]),s("ul",[s("li",[s("code",[a._v("some-mysql")]),a._v("：分配给容器的名称")]),a._v(" "),s("li",[s("code",[a._v("root")]),a._v("：为root用户设置的密码")]),a._v(" "),s("li",[s("code",[a._v("tag")]),a._v("："),s("code",[a._v("mysql")]),a._v("镜像标签")])]),a._v(" "),s("h1",{attrs:{id:"挂载数据卷以及配置文件启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载数据卷以及配置文件启动"}},[a._v("#")]),a._v(" 挂载数据卷以及配置文件启动")]),a._v(" "),s("h2",{attrs:{id:"查找配置文件位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查找配置文件位置"}},[a._v("#")]),a._v(" 查找配置文件位置")]),a._v(" "),s("p",[a._v("不同版本部署的 MySQL 内，可能文件路径不一致，如 "),s("code",[a._v("/etc/mysql/my.cnf")]),a._v("、 "),s("code",[a._v("/etc/mysql/conf.d")]),a._v(" 或者 "),s("code",[a._v("/etc/mysql/mysql.conf.d")]),a._v("等。运行以下命令查找"),s("code",[a._v("mysql")]),a._v("配置文件"),s("code",[a._v("my.cnf")]),a._v("的位置：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--rm")]),a._v(" mysql mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" my.cnf\n复制代码\n")])])]),s("p",[a._v("得到结果：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("                      order of preference, my.cnf, "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$MYSQL_TCP_PORT")]),a._v(",\n/etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf\n复制代码\n")])])]),s("p",[a._v("意思是按照"),s("code",[a._v("/etc/my.cnf")]),a._v("、"),s("code",[a._v("/etc/mysql/my.cnf")]),a._v("、"),s("code",[a._v("~/.my.cnf")]),a._v("路径按优先排序。")]),a._v(" "),s("p",[a._v("依次访问上述路径：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--rm")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/my.cnf\ncat: /etc/my.cnf: No such "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" or directory\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--rm")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/mysql/my.cnf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# This program is free software; you can redistribute it and/or modify")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n复制代码\n")])])]),s("p",[a._v("可以得到镜像中"),s("code",[a._v("mysql")]),a._v("配置文件路径为"),s("code",[a._v("/etc/mysql/my.cnf")])]),a._v(" "),s("h2",{attrs:{id:"查找数据文件位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查找数据文件位置"}},[a._v("#")]),a._v(" 查找数据文件位置")]),a._v(" "),s("p",[a._v("运行以下命令查看"),s("code",[a._v("mysql")]),a._v("镜像信息：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect mysql\n复制代码\n")])])]),s("p",[a._v("得到结果：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Volumes"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/var/lib/mysql"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n复制代码\n")])])]),s("p",[a._v("可以得到"),s("code",[a._v("mysql")]),a._v("挂载的数据文件路径为"),s("code",[a._v("/var/lib/mysql")])]),a._v(" "),s("h2",{attrs:{id:"创建本地路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建本地路径"}},[a._v("#")]),a._v(" 创建本地路径")]),a._v(" "),s("p",[a._v("在物理机上，创建指定数据和配置文件的挂载路径（须在docker进程有写权限的目录下，如"),s("code",[a._v("/home/docker")]),a._v("）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /home/docker/mysql/conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /home/docker/mysql/datadir\n复制代码\n")])])]),s("p",[a._v("将容器的"),s("code",[a._v("mysql")]),a._v("默认配置文件"),s("code",[a._v("/etc/mysql/my.cnf")]),a._v("拷贝出来")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" mysql"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CID")]),a._v(":/etc/mysql/my.cnf /home/docker/mysql/conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CID")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CID")]),a._v("\n复制代码\n")])])]),s("h2",{attrs:{id:"挂载启动mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载启动mysql"}},[a._v("#")]),a._v(" 挂载启动MySQL")]),a._v(" "),s("p",[a._v("知道了"),s("code",[a._v("mysql")]),a._v("配置文件和数据文件位置，就可以挂载启动"),s("code",[a._v("mysql")]),a._v("服务了")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" some-mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(":3306 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("my-secret-pw "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /home/docker/mysql/conf/my.cnf:/etc/my.cnf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /home/docker/mysql/datadir:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("on-failure:3 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" mysql\n复制代码\n")])])]),s("ul",[s("li",[s("strong",[a._v("--name")]),a._v("：为容器指定一个名字")]),a._v(" "),s("li",[s("strong",[a._v("-p")]),a._v("：指定端口映射，格式为："),s("strong",[a._v("主机(宿主)端口:容器端口")])]),a._v(" "),s("li",[s("strong",[a._v("-e")]),a._v("：设置环境变量")]),a._v(" "),s("li",[s("strong",[a._v("--restart=on-failure:3")]),a._v("：是指容器在未来出现异常退出（退出码非0）的情况下循环重启3次")]),a._v(" "),s("li",[s("strong",[a._v("--mount")]),a._v("：目录挂载")]),a._v(" "),s("li",[s("strong",[a._v("-d")]),a._v("：后台运行容器，并返回容器 id")])]),a._v(" "),s("h1",{attrs:{id:"mysql-命令行客户端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-命令行客户端"}},[a._v("#")]),a._v(" MySQL 命令行客户端")]),a._v(" "),s("p",[a._v("命令启动另一个"),s("code",[a._v("mysql")]),a._v("容器实例进入命令行客户端：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--rm")]),a._v(" mysql mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-hsome.mysql.host")]),a._v(" -usome-mysql-user "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("\n复制代码\n")])])]),s("h1",{attrs:{id:"查看mysql日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看mysql日志"}},[a._v("#")]),a._v(" 查看MySQL日志")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs some-mysql\n复制代码\n")])])]),s("h1",{attrs:{id:"环境变量说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量说明"}},[a._v("#")]),a._v(" 环境变量说明")]),a._v(" "),s("p",[a._v("在启动"),s("code",[a._v("mysql")]),a._v("镜像时，可以通过在"),s("code",[a._v("docker run")]),a._v("命令行中传递一个或多个环境变量来调整 MySQL 实例的配置。请注意，如果您使用已经包含数据库的数据目录启动容器，则以下任何变量都不会产生任何影响：在容器启动时，任何预先存在的数据库将始终保持不变。")]),a._v(" "),s("h3",{attrs:{id:"mysql-root-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-root-password"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_ROOT_PASSWORD")])]),a._v(" "),s("p",[a._v("此变量是必需的，它指定将为 MySQL"),s("code",[a._v("root")]),a._v("超级用户帐户设置的密码。在上面的例子中，它被设置为"),s("code",[a._v("root")]),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"mysql-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-database"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_DATABASE")])]),a._v(" "),s("p",[a._v("此变量是可选的，允许您指定要在映像启动时创建的数据库的名称。如果提供了用户/密码（见下文），则该用户将被授予对该数据库的超级用户访问权限（"),s("a",{attrs:{href:"https://link.juejin.cn?target=http%3A%2F%2Fdev.mysql.com%2Fdoc%2Fen%2Fadding-users.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("对应于"),s("code",[a._v("GRANT ALL")]),s("OutboundLink")],1),a._v("）。")]),a._v(" "),s("h3",{attrs:{id:"mysql-user-mysql-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-user-mysql-password"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_USER")]),a._v(", "),s("code",[a._v("MYSQL_PASSWORD")])]),a._v(" "),s("p",[a._v("这些变量是可选的，结合使用来创建新用户和设置该用户的密码。该用户将被授予对"),s("code",[a._v("MYSQL_DATABASE")]),a._v("变量指定的数据库的超级用户权限（见上文）。")]),a._v(" "),s("h3",{attrs:{id:"mysql-allow-empty-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-allow-empty-password"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_ALLOW_EMPTY_PASSWORD")])]),a._v(" "),s("p",[a._v("这是一个可选变量。设置为非空值，例如"),s("code",[a._v("yes")]),a._v("，以允许使用 root 用户的空白密码启动容器。")]),a._v(" "),s("h3",{attrs:{id:"mysql-random-root-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-random-root-password"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_RANDOM_ROOT_PASSWORD")])]),a._v(" "),s("p",[a._v("这是一个可选变量。设置为非空值，如"),s("code",[a._v("yes")]),a._v("，为 root 用户生成随机初始密码（使用"),s("code",[a._v("pwgen")]),a._v("）。生成的 root 密码将打印到控制台 ( "),s("code",[a._v("GENERATED ROOT PASSWORD: .....")]),a._v(")。")]),a._v(" "),s("h3",{attrs:{id:"mysql-onetime-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-onetime-password"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_ONETIME_PASSWORD")])]),a._v(" "),s("p",[a._v("初始化完成后，将root（"),s("em",[a._v("不是")]),a._v("在"),s("code",[a._v("MYSQL_USER")]),a._v("! 中指定的用户）用户设置为过期，强制在首次登录时更改密码。任何非空值都将激活此设置。"),s("em",[a._v("注意")]),a._v("：此功能仅在 MySQL 5.6+ 上受支持。在 MySQL 5.5 上使用此选项将在初始化期间引发适当的错误。")]),a._v(" "),s("h3",{attrs:{id:"mysql-initdb-skip-tzinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-initdb-skip-tzinfo"}},[a._v("#")]),a._v(" "),s("code",[a._v("MYSQL_INITDB_SKIP_TZINFO")])]),a._v(" "),s("p",[a._v("默认情况下，入口点脚本会自动加载"),s("code",[a._v("CONVERT_TZ()")]),a._v("函数所需的时区数据。如果不需要，任何非空值都会禁用时区加载。")]),a._v(" "),s("h1",{attrs:{id:"备份和恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份和恢复"}},[a._v("#")]),a._v(" 备份和恢复")]),a._v(" "),s("h2",{attrs:{id:"创建数据库转储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库转储"}},[a._v("#")]),a._v(" 创建数据库转储")]),a._v(" "),s("p",[a._v("启动"),s("code",[a._v("mysql")]),a._v("镜像使用"),s("code",[a._v("mysqldump")]),a._v("命令备份：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" some-mysql "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'exec mysqldump --all-databases -uroot -p\"$MYSQL_ROOT_PASSWORD\"'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /some/path/on/your/host/all-databases.sql\n复制代码\n")])])]),s("h2",{attrs:{id:"从转储文件中恢复数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从转储文件中恢复数据"}},[a._v("#")]),a._v(" 从转储文件中恢复数据")]),a._v(" "),s("p",[a._v("启动"),s("code",[a._v("mysql")]),a._v("镜像执行"),s("code",[a._v(".sql")]),a._v("文件")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" some-mysql "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'exec mysql -uroot -p\"$MYSQL_ROOT_PASSWORD\"'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" /some/path/on/your/host/all-databases.sql\n复制代码\n")])])]),s("h2",{attrs:{id:"docker容器-查看、停止、删除容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker容器-查看、停止、删除容器"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://nkcoder.github.io/posts/docker/docker-container-list-stop-remove/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker容器：查看、停止、删除容器"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("July 9, 2020 3-minute read")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://nkcoder.github.io/categories/docker/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"查看容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[a._v("#")]),a._v(" 查看容器")]),a._v(" "),s("p",[a._v("列出容器的命令为："),s("code",[a._v("docker container ls")]),a._v("，等价的别名为：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container list\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n")])])]),s("p",[a._v("常用的参数说明如下：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("-a, --all")]),a._v("：列出所有的容器，包括停止运行的容器")]),a._v(" "),s("li",[s("code",[a._v("-s, --size")]),a._v("：显示容器的大小")]),a._v(" "),s("li",[s("code",[a._v("-q, --quiet")]),a._v("：仅显示容器ID")]),a._v(" "),s("li",[s("code",[a._v("-f, --filter")]),a._v("：过滤器，支持"),s("code",[a._v("key=value")]),a._v("的格式进行过滤，多个过滤器使用"),s("code",[a._v('-f "key=value" -f "key=value"')]),a._v("格式")])]),a._v(" "),s("p",[s("code",[a._v("-a")]),a._v("列出所有容器：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\nCONTAINER ID        IMAGE                                                 COMMAND                  CREATED             STATUS                    PORTS                               NAMES\n1c4bc2440cff        docker.elastic.co/elasticsearch/elasticsearch:7.7.0   "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/tini -- /usr/local…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" days ago          Exited "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("130")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" days ago                                       sweet_lovelace\nda242f09324e        mysql:8.0.19                                          "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" minutes             "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:3306-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v("/tcp, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("33060")]),a._v("/tcp   freeimmi_mini_db_1\n")])])]),s("p",[s("code",[a._v("-s")]),a._v("列出容器的大小：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES                SIZE\nda242f09324e        mysql:8.0.19        "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(" minutes       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:3306-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v("/tcp, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("33060")]),a._v("/tcp   freeimmi_mini_db_1   105B "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("virtual 547MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("blockquote",[s("p",[s("code",[a._v("SIZE")]),a._v("列显示的是容器的"),s("strong",[a._v("可写层")]),a._v("占用的空间，括号中的virtual表示容器镜像的"),s("strong",[a._v("只读层")]),a._v("和容器的"),s("strong",[a._v("可写层")]),a._v("总共占用的空间。")])]),a._v(" "),s("p",[s("code",[a._v("-q")]),a._v("仅显示容器ID：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v("\nda242f09324e\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n1c4bc2440cff\nda242f09324e\n")])])]),s("p",[s("code",[a._v("-f")]),a._v("可以通过容器名称（name）、退出状态（exited）、容器状态（status）、创建时间（before|since|after）等进行过滤：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'name=freeimmi_mini_db_1'")]),a._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMES\nda242f09324e        mysql:8.0.19        "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(" seconds       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:3306-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v("/tcp, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("33060")]),a._v("/tcp   freeimmi_mini_db_1\n\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop freeimmi_mini_db_1\nfreeimmi_mini_db_1\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'exited=0'")]),a._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES\nda242f09324e        mysql:8.0.19        "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Exited "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("48")]),a._v(" seconds ago                       freeimmi_mini_db_1\n\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start freeimmi_mini_db_1\nfreeimmi_mini_db_1\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" freeimmi_mini_db_1\nfreeimmi_mini_db_1\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'exited=137'")]),a._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS               NAMES\nda242f09324e        mysql:8.0.19        "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Exited "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("137")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" seconds ago                       freeimmi_mini_db_1\n")])])]),s("h3",{attrs:{id:"停止容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[a._v("#")]),a._v(" 停止容器")]),a._v(" "),s("p",[a._v("停止容器使用"),s("code",[a._v("docker container stop")]),a._v("或者"),s("code",[a._v("docker stop")]),a._v("命令，该命令会向容器内的主进程发送"),s("code",[a._v("SIGTERM")]),a._v("信号，等待一段时间后，再发送"),s("code",[a._v("SIGKILL")]),a._v("命令。")]),a._v(" "),s("p",[a._v("可以使用"),s("code",[a._v("-t, --time")]),a._v("设置kill之前的等待时间，默认是10s：")]),a._v(" "),s("div",{staticClass:"language-fallback extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("➜  ~ docker container start freeimmi_mini_db_1\nfreeimmi_mini_db_1\n➜  ~ docker stop -t 20 freeimmi_mini_db_1\nfreeimmi_mini_db_1\n")])])]),s("h3",{attrs:{id:"删除容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[a._v("#")]),a._v(" 删除容器")]),a._v(" "),s("p",[a._v("删除容器使用"),s("code",[a._v("docker container rm")]),a._v("或者"),s("code",[a._v("docker rm")]),a._v("命令。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\nCONTAINER ID        IMAGE                                                 COMMAND                  CREATED             STATUS                     PORTS               NAMES\n58a0b9865684        alpine                                                "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/bin/sh"')]),a._v("                "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("44")]),a._v(" seconds ago      Up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("43")]),a._v(" seconds                                  my_alpine3\n1c4bc2440cff        docker.elastic.co/elasticsearch/elasticsearch:7.7.0   "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/tini -- /usr/local…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" days ago          Exited "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("130")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" days ago                        sweet_lovelace\nda242f09324e        mysql:8.0.19                                          "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" weeks ago         Exited "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" minutes ago                       freeimmi_mini_db_1\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" 1c4bc2440cff\n1c4bc2440cff\n")])])]),s("p",[s("code",[a._v("docker rm")]),a._v("不能直接删除运行中的容器，可是使用"),s("code",[a._v("-f, --force")]),a._v("参数，表示强制删除，即直接向容器中的主进程发送"),s("code",[a._v("SIGKILL")]),a._v("信号，一般不推荐这么做，建议先使用"),s("code",[a._v("docker stop")]),a._v("停止容器，然后再使用"),s("code",[a._v("docker rm")]),a._v("删除容器，给容器留出一些时间进行清理等工作：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n58a0b9865684        alpine              "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/bin/sh"')]),a._v("           "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" minutes ago       Up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" minutes                            my_alpine3\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" 58a0b9865684\n58a0b9865684\n")])])]),s("p",[a._v("删除所有停止的容器：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nda242f09324e\n")])])]),s("p",[s("code",[a._v("-v")]),a._v("参数表示删除与容器关联的所有匿名的卷：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" awesome:/foo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /bar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" hell-redis redis\n7da82099f278dd15c6ee16ea5a1e347feb1f3f45b9c8890c830cd7f095e1c63f\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\n7da82099f278        redis               "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-entrypoint.s…"')]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" seconds ago       Created                                 hell-redis\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" hell-redis\nhell-redis\n➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" awesome\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v("               awesome\n")])])]),s("p",[a._v("删除容器，还可以使用"),s("code",[a._v("docker container prune")]),a._v("，表示删除所有停止的容器，"),s("code",[a._v("-f, --force")]),a._v("参数表示不需要交互式确认：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("➜  ~ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container prune "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("\nDeleted Containers:\n72a9df4be93f1fa11dc61d73ef48211b507949a1aaa0231a5ef0383cd61c4d45\n73d22e04a8ae342174e0069029066d4f03f3a94b373b6d0c253654ee926592fb\n44c829e75011bb913c7af9bf095ccec865084db1905a80dfacbb3e4b47209b17\n\nTotal reclaimed space: 0B\n")])])]),s("p",[s("code",[a._v("--filter")]),a._v("支持过滤，目前支持的过滤器有："),s("code",[a._v("unitl(删除指定时间之前的容器)")]),a._v("和"),s("code",[a._v("label(删除指定标签的容器)")]),a._v(":")]),a._v(" "),s("div",{staticClass:"language-fallback extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('➜  ~ docker container prune -f --filter "until=1m"\nDeleted Containers:\n633cb0d9b525e7e595442e8545ef6458c9dbf342fd12c00616acd63ee73bcafb\n\nTotal reclaimed space: 0B\n')])])]),s("h3",{attrs:{id:"reference-docs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reference-docs"}},[a._v("#")]),a._v(" reference docs:")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/ps/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker ps"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/stop/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker stop"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/rm/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker rm"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/container_prune/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker container prune"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);